<section class="font-rajdhani bg-[#0a0c10] min-h-screen py-10 px-8 text-text-secondary">
    <div
        class="flex flex-col gap-1.5 mb-8 relative pl-5 before:content-[''] before:absolute before:left-0 before:top-0 before:bottom-0 before:w-0.5 before:bg-linear-to-b before:from-[#a3e635] before:to-cyan-bright before:rounded-sm"
    >
        <h1 class="text-[2rem] font-bold tracking-[0.12em] uppercase text-[#e8edf5] m-0 leading-none">
            ITEMS <span class="text-[#a3e635]">MGMT</span>
        </h1>
        <p class="text-[0.85rem] text-text-muted tracking-[0.05em] m-0 font-techmono">// crud · item reguler</p>
    </div>

    <% if (error) { %>
    <div
        class="py-3 px-5 rounded-sm text-[0.85rem] font-techmono tracking-[0.04em] mb-5 border-l-[3px] bg-[rgba(239,68,68,0.08)] border-l-red-bright text-[#fca5a5]"
    >
        ⚠
        <%= error %>
    </div>
    <% } %>
    <% if (success) { %>
    <div
        class="py-3 px-5 rounded-sm text-[0.85rem] font-techmono tracking-[0.04em] mb-5 border-l-[3px] bg-[rgba(163,230,53,0.08)] border-l-[#a3e635] text-[#bef264]"
    >
        ✓
        <%= success %>
    </div>
    <% } %>

    <div
        class="bg-[#0f1117] border border-border rounded px-6 py-6 mb-6 relative overflow-hidden after:content-[''] after:absolute after:top-0 after:left-0 after:right-0 after:h-0.5 after:bg-linear-to-r after:from-[#a3e635] after:via-cyan-bright after:to-transparent"
    >
        <h2 class="font-bold tracking-widest uppercase text-[#a3e635] m-0 mb-5 font-techmono text-[0.85rem]">
            <%= editItem ? '// EDIT_ITEM' : '// ADD_ITEM' %>
        </h2>
        <form method="POST" action="<%= editItem ? `/items/${editItem.id}/update` : '/items/create' %>">
            <div class="grid grid-cols-2 gap-3 max-sm:grid-cols-1">
                <input
                    class="bg-[#141720] border border-border rounded-sm py-2.5 px-4 text-[#e8edf5] font-rajdhani text-[0.95rem] font-medium w-full outline-none transition-colors focus:border-[#a3e635] focus:shadow-[0_0_0_2px_rgba(163,230,53,0.08)] placeholder:text-[#3d4a5c]"
                    name="name"
                    placeholder="Nama Item"
                    value="<%= editItem ? editItem.name : '' %>"
                    required
                />
                <input
                    class="bg-[#141720] border border-border rounded-sm py-2.5 px-4 text-[#e8edf5] font-rajdhani text-[0.95rem] font-medium w-full outline-none transition-colors focus:border-[#a3e635] focus:shadow-[0_0_0_2px_rgba(163,230,53,0.08)] placeholder:text-[#3d4a5c]"
                    name="price"
                    type="number"
                    placeholder="Harga"
                    value="<%= editItem ? editItem.price : '' %>"
                    required
                />
                <input
                    class="bg-[#141720] border border-border rounded-sm py-2.5 px-4 text-[#e8edf5] font-rajdhani text-[0.95rem] font-medium w-full outline-none transition-colors focus:border-[#a3e635] focus:shadow-[0_0_0_2px_rgba(163,230,53,0.08)] placeholder:text-[#3d4a5c]"
                    name="rarity"
                    placeholder="Rarity"
                    value="<%= editItem ? editItem.rarity : '' %>"
                    required
                />
                <input
                    class="bg-[#141720] border border-border rounded-sm py-2.5 px-4 text-[#e8edf5] font-rajdhani text-[0.95rem] font-medium w-full outline-none transition-colors focus:border-[#a3e635] focus:shadow-[0_0_0_2px_rgba(163,230,53,0.08)] placeholder:text-[#3d4a5c]"
                    name="drop_rate"
                    type="number"
                    step="0.0001"
                    placeholder="Drop Rate"
                    value="<%= editItem ? editItem.drop_rate : '' %>"
                    required
                />

                <select
                    name="is_idle_item"
                    class="bg-[#141720] border border-border rounded-sm py-2.5 px-4 text-[#e8edf5] font-rajdhani text-[0.95rem] font-medium w-full outline-none transition-colors focus:border-[#a3e635] focus:shadow-[0_0_0_2px_rgba(163,230,53,0.08)]"
                >
                    <% if (editItem && Number(editItem.is_idle_item) === 0) { %>
                    <option value="1">Idle Item</option>
                    <option value="0" selected>Non Idle Item</option>
                    <% } else { %>
                    <option value="1" selected>Idle Item</option>
                    <option value="0">Non Idle Item</option>
                    <% } %>
                </select>

                <div class="col-span-full flex gap-3 items-center max-sm:col-span-1">
                    <button
                        type="submit"
                        class="bg-[#a3e635] text-[#0a0c10] border-none py-2.5 px-6 rounded-sm font-rajdhani font-bold text-[0.95rem] tracking-[0.08em] uppercase cursor-pointer transition-all hover:bg-[#bef264] hover:-translate-y-px"
                    >
                        <%= editItem ? 'Update' : 'Tambah' %>
                    </button>
                    <% if (editItem) { %>
                    <a
                        href="/items"
                        class="bg-transparent border border-border text-text-muted py-2.5 px-5 rounded-sm font-rajdhani text-[0.95rem] no-underline tracking-[0.05em] transition-colors hover:border-muted hover:text-text-secondary"
                    >
                        Batal
                    </a>
                    <% } %>
                </div>
            </div>
        </form>
    </div>

    <div
        class="bg-[#0f1117] border border-border rounded overflow-x-auto relative before:content-[''] before:absolute before:top-0 before:left-0 before:right-0 before:h-0.5 before:bg-linear-to-r before:from-[#a3e635] before:to-transparent"
    >
        <table class="w-full border-collapse min-w-160">
            <thead class="bg-[#141720]">
                <tr>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        #ID
                    </th>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        Nama
                    </th>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        Harga
                    </th>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        Rarity
                    </th>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        Drop Rate
                    </th>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        Idle
                    </th>
                    <th
                        class="py-3.5 px-5 text-left font-techmono text-[0.68rem] tracking-[0.14em] uppercase text-[#a3e635] font-normal border-b border-border"
                    >
                        Aksi
                    </th>
                </tr>
            </thead>
            <tbody>
                <% if (!items || items.length === 0) { %>
                <tr>
                    <td colspan="7" class="py-3.5 px-5 text-text-secondary text-[0.95rem] font-medium">
                        <div
                            class="text-center py-12 px-5 font-techmono text-[0.78rem] text-text-darker tracking-[0.08em]"
                        >
                            // NO_ITEMS · belum ada item
                        </div>
                    </td>
                </tr>
                <% } %>
                <% if (items && items.length > 0) { %> <% items.forEach((item) => { %>
                <tr class="border-b border-[#141720] transition-colors hover:bg-[rgba(163,230,53,0.03)]">
                    <td class="py-3.5 px-5 font-medium font-techmono text-[0.78rem] text-text-secondary">
                        <%= item.id %>
                    </td>
                    <td class="py-3.5 px-5 text-text-secondary text-[0.95rem] font-medium"><%= item.name %></td>
                    <td class="py-3.5 px-5 font-medium font-techmono text-[0.82rem] text-[#a3e635]">
                        <%= item.price %>
                    </td>
                    <td class="py-3.5 px-5 text-text-secondary text-[0.95rem] font-medium">
                        <span
                            class="inline-block py-0.5 px-2 rounded-xs text-[0.72rem] font-techmono tracking-[0.06em] bg-[rgba(0,229,255,0.1)] border border-[rgba(0,229,255,0.25)] text-[#67e8f9]"
                        >
                            <%= item.rarity %>
                        </span>
                    </td>
                    <td class="py-3.5 px-5 font-medium font-techmono text-[0.8rem] text-text-muted">
                        <%= item.drop_rate %>
                    </td>
                    <td class="py-3.5 px-5 text-text-secondary text-[0.95rem] font-medium">
                        <% if (Number(item.is_idle_item) === 1) { %>
                        <span
                            class="inline-block py-0.5 px-2 rounded-xs text-[0.7rem] font-techmono bg-[rgba(163,230,53,0.1)] border border-[rgba(163,230,53,0.25)] text-[#a3e635]"
                            >IDLE</span
                        >
                        <% } else { %>
                        <span
                            class="inline-block py-0.5 px-2 rounded-xs text-[0.7rem] font-techmono bg-[rgba(100,116,139,0.12)] border border-border text-text-secondary"
                            >NON</span
                        >
                        <% } %>
                    </td>
                    <td class="py-3.5 px-5 text-text-secondary text-[0.95rem] font-medium">
                        <div class="flex gap-2 items-center">
                            <a
                                href="/items/<%= item.id %>/edit"
                                class="inline-block py-1 px-3 rounded-xs bg-[rgba(234,179,8,0.15)] border border-[rgba(234,179,8,0.3)] text-[#fbbf24] text-[0.8rem] font-techmono no-underline transition-colors hover:bg-[rgba(234,179,8,0.25)]"
                            >
                                Edit
                            </a>
                            <form
                                method="POST"
                                action="/items/<%= item.id %>/delete"
                                onsubmit="return confirm('Hapus item ini?');"
                                class="m-0"
                            >
                                <button
                                    type="submit"
                                    class="inline-block py-1 px-3 rounded-xs bg-[rgba(239,68,68,0.12)] border border-[rgba(239,68,68,0.25)] text-button-accent text-[0.8rem] font-techmono cursor-pointer transition-colors hover:bg-[rgba(239,68,68,0.22)]"
                                >
                                    Hapus
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                <% }) %>
                <% } %>
            </tbody>
        </table>
    </div>
</section>
